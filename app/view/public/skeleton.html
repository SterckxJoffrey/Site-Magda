<!DOCTYPE html>
<html lang="%%LANG%%">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>%%HEAD_TITLE%%</title>
    <link rel="stylesheet" href="/asset/css/style.css">
    <link rel="stylesheet" href="/asset/css/skeleton.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Orbitron:wght@400..900&family=Public+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    %%ADDITIONAL_CSS%%
</head>
<body>
    <header>
      
        <nav class="navbar">
          <a href="/" class="logo"><img src="/asset/img/logo.png" alt="logo Magda"></a>
          <button class="burger" aria-label="Menu" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </button>
        <ul class="nav-links">
          %%MENU%%
        </ul>
        </nav> 
    </header>

    <main>
        %%MAIN_CONTENT%%
    </main>
    <script src="/asset/js/navbar.js"></script>
<script>
(function() {
  // Récupérer la langue du navigateur et la langue stockée
  const browserLang = navigator.language.slice(0, 2);
  const savedLang = localStorage.getItem('site_lang');
  const preferredLang = savedLang || (['fr', 'pl'].includes(browserLang) ? browserLang : 'fr');

  // On récupère la langue actuelle dans l'URL (le 1er segment)
  const pathParts = window.location.pathname.split('/').filter(Boolean);
  const currentLang = pathParts.length > 0 && ['fr', 'pl'].includes(pathParts[0]) ? pathParts[0] : null;

  if (preferredLang && preferredLang !== currentLang) {
    // Reconstruire le chemin sans la langue
    const pathWithoutLang = currentLang ? pathParts.slice(1).join('/') : pathParts.join('/');
    // Redirection vers la bonne langue avec le chemin
    window.location.replace(`/${preferredLang}/${pathWithoutLang}`);
  }

  // Ajouter des événements sur les drapeaux pour enregistrer la langue choisie
  document.addEventListener('DOMContentLoaded', () => {
    const langSwitcher = document.querySelector('.lang-switcher');
    if (langSwitcher) {
      langSwitcher.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          // Extraire la langue du lien href (/fr/... ou /pl/...)
          const lang = link.getAttribute('href').split('/')[1];
          localStorage.setItem('site_lang', lang);
        });
      });
    }
  });
})();
</script>


</body>
</html>